# The following is the code to download the NcML files from the Dataverse server

numbers=(3336231 6711874 6530114 4164687 3830437 3138707 5254702 5373736 6545436 7017644 6183442 3032148 4849191 5862484 6183199 6096911 6881112 6291381 4499596 6186955 3986102 3417267 3833251 6022747 4034232 3465866 2904219 5617927 3621191 3364353 6182473 4550425 3562289 2845786 6694418 6183090 6188531 3030758 5194336 3594202 3351362 5255340 5005751 6418449 5028698 6714055 3822819 3475231 6290255 5208811 4513225 3172721 3849458 5425494 6188534 6987648 6548443 4079670 3492618 4215165 4640650 4750746 4301113 6379423 2728543 6550315 4491248 6020998 6081603 3349351 3625951 6554232 4656607 6788667 6361724 6182914 3542392 3806483 5370580 6165902 6185326 6951241 5588386 5194006 6344576 2845403 6987170 6021932 4301211 6462424 6183184 4499667 6415671 4067194 6880733 2688926 6290109 6558727 6182577 4372504 2842848 6696450 3878164 6185322 2862501 7063045 4098599 6182607 5746874 3744335 6182872 4499659 6154805 3396860 3986246 6415048 6182748 6930719 6183147 4300690 6183456 6334921 6183126 5371196 4621827 6573059 6411320 3101967 7093996 6361533 4638255 4101125 6902367 4062524)


export SERVER_URL=https://dataverse.harvard.edu 


# Iterate over the list and print each number
for ID in "${numbers[@]}"
do
    echo "$ID"
    #curl -H "X-Dataverse-key:$API_TOKEN" -X POST "$SERVER_URL/api/files/$ID/extractNcml" > auxfilecreate_$ID.txt
    # https://dataverse.harvard.edu/api/access/datafile/3336231/auxiliary/NcML/0.1
    curl -L "$SERVER_URL/api/access/datafile/$ID/auxiliary/$FORMAT_TAG/$FORMAT_VERSION" > auxfile_$ID.xml
    sleep 0.5
done